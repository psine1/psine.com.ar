/*!
 * Copyright 2019 (c) Sky in the sea, LLC - All Rights Reserved.
 * 
 * Visit https://skyinthesea.com/products/forge for more info.
 * Written by Amir Ossanloo <amir@skyinthesea.com>.
 * 
 */!function(i){var s={};function r(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=i,r.c=s,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(i,s,function(t){return e[t]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}({0:function(t,e,i){var r=i(1);t.exports=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.forEach(function(t){r(e,t,i[t])})}return e}},1:function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},9:function(t,e,i){"use strict";i.r(e);var s=i(0),r=i.n(s);function n(t,e){if(this.type="Canvas",this.settings=t,this.system=e,this.settings.canvas)this.canvas=this.settings.canvas;else{this.settings.clearCanvas=!0;var i=document.getElementById("forge-banner"),s={type:"canvas",width:i?i.get("width"):300,height:i?i.get("height"):250,parent:i||document.body},r=FORGE.combineObjects(s,this.settings);r=FORGE.deleteProps(r,this.system.deleteProps),this.canvas=FORGE.createElement(r)}this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height}n.prototype.clearCanvas=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.renderParticles=function(t){this.settings.clearCanvas&&this.clearCanvas();for(var e=0;e<t.length;e++)this.renderParticle(t[e])},n.prototype.renderParticle=function(t){if(t.img){var e=t.img;this.ctx.save(),this.ctx.translate(t.x,t.y),this.ctx.rotate(t.rotation),this.ctx.scale=t.scale,this.ctx.globalAlpha=t.opacity,this.ctx.drawImage(e,-e.width*t.scale/2,-e.height*t.scale/2,e.width*t.scale,e.height*t.scale),this.ctx.restore()}};var a=n;function h(){this.x=0,this.y=0,this.vx=0,this.vy=0,this.mass=0,this.radius=0,this.friction=0,this.rotation=0,this.rotationSpeed=0,this.scale=0,this.opacity=0,this.progress=0,this.lifespan=0,this.springs=[],this.vortices=[]}h.prototype.addSpring=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.removeSpring(t),this.springs.push({point:t,k:e,length:i})},h.prototype.removeSpring=function(t){for(var e=this.springs.length,i=0;i<e;i++){if(t===this.springs[i].point){this.springs.splice(i,1);break}}},h.prototype.springTo=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,s=t.x-this.x,r=t.y-this.y,n=Math.sqrt(s*s+r*r),a=(n-i)*e;this.vx+=s/n*a,this.vy+=r/n*a},h.prototype.handleSprings=function(){for(var t=this.springs.length,e=0;e<t;e++){var i=this.springs[e];this.springTo(i.point,i.k,i.length)}},h.prototype.addVortex=function(t,e,i,s){this.removeVortex(t),this.springs.push({point:t,radius:e,speed1:i,speed2:s})},h.prototype.removeVortex=function(t){for(var e=this.vortices.length,i=0;i<e;i++){if(t===this.vortices[i].point){this.vortices.splice(i,1);break}}},h.prototype.vortexTo=function(t,e,i,s){var r=t.x-this.x,n=t.y-this.y,a=Math.sqrt(r*r+n*n),h=FORGE.math.map(a,0,e,i,s,!0);this.vx+=n*h,this.vy+=r*h},h.prototype.handleVortices=function(){for(var t=this.vortices.length,e=0;e<t;e++){var i=this.vortices[e];this.vortexTo(i.point,i.radius,i.speed1,i.speed2)}},h.prototype.accelerate=function(t,e){this.vx+=t,this.vy+=e},h.prototype.getSpeed=function(){return Math.sqrt(this.vx*this.vx+this.vy*this.vy)},h.prototype.setSpeed=function(t){var e=this.getHeading();this.vx=Math.cos(e)*t,this.vy=Math.sin(e)*t},h.prototype.getHeading=function(){return Math.atan2(this.vy,this.vx)},h.prototype.setHeading=function(t){var e=this.getSpeed();this.vx=Math.cos(t)*e,this.vy=Math.sin(t)*e},h.prototype.getLifeCurve=function(){return Math.sin(this.progress*Math.PI)},h.prototype.update=function(t){this.age+=1,this.progress=this.age/this.lifespan,1<this.progress&&(this.progress=1),this.handleSprings(),this.handleVortices(),this.vx*=this.friction,this.vy*=this.friction,this.x+=this.vx,this.y+=this.vy,this.rotation+=this.rotationSpeed};var o=h,c={preCalc:!0,autoStart:!0,vx:0,vy:0,gravity:.06,wind:0,turbulence:.1,friction:.97,scale:1,opacity:1,rotation:0,rotationSpeed:0,fps:60,reverseRender:!1,recycleStrays:!0,immortal:!1};function l(t){this.settings=FORGE.combineObjects(c,t),this.deleteProps=["preCalc","scale","rotation","opacity","reverseRender","images","clearCanvas","maxParticles","autoStart","turbulence","gravity","wind","friction","vx","vy","areaPadding","rotationSpeed","fps","lifespan","particlesPerSecond","emitter","onUpdate","onUpdateParticle","onUpdateParticles","onParticleDeath","onInit","onEmitParticle","renderParticle","renderParticles","recycleStrays","immortal"],this.renderer=new a(this.settings,this),this.emitter=this.settings.emitter||{x:0,y:0,width:this.renderer.width,height:this.renderer.height},this.settings.images&&(this.images=this.settings.images.slice()),this.onInit=this.settings.onInit,this.onEmitParticle=this.settings.onEmitParticle,this.onUpdateParticle=this.settings.onUpdateParticle,this.onUpdateParticles=this.settings.onUpdateParticles,this.onParticleDeath=this.settings.onParticleDeath,this.settings.renderParticle&&(this.renderer.renderParticle=this.settings.renderParticle),this.settings.renderParticles&&(this.renderer.renderParticles=this.settings.renderParticles),this.lifespan=this.settings.lifespan,this.maxParticles=this.settings.maxParticles,this.particlesPerSecond=this.settings.particlesPerSecond,this.maxParticles&&this.particlesPerSecond&&this.lifespan&&(this.lifespan=null,FORGE.log("Particles: Lifespan changed to honor maxParticles & partriclesPerSecond")),this.maxParticles||(this.maxParticles=this.lifespan*this.particlesPerSecond),this.particlesPerSecond||(this.particlesPerSecond=this.maxParticles/this.lifespan),this.lifespan||(this.lifespan=this.maxParticles/this.particlesPerSecond),FORGE.log("Particles:\n\tRenderer: ".concat(this.renderer.type,"\n\tLifespan: ").concat(this.lifespan,"\n\tMax particles: ").concat(this.maxParticles,"\n\tParticles per second: ").concat(this.particlesPerSecond,"}")),this.oldTime=(new Date).getTime()/1e3,this.lastEmitTime=this.oldTime,this.currentTime=0,this.deltaTime=0,this.fps=this.settings.fps,this.updateInterval=1/this.fps,this.emitInterval=1/this.particlesPerSecond,this.particlesPerFrame=this.updateInterval/this.emitInterval,this.particleRest=0,this.running=!1,this.activeParticles=[],this.idleParticles=[],this.images&&this.prepareImages();for(var e=0;e<this.maxParticles;e++){var i=new o(0,0,0,0);this.idleParticles.push(i),this.renderer.onCreateParticle&&this.renderer.onCreateParticle(i)}this.onInit&&this.onInit(this.idleParticles),this.renderer.onInit&&this.renderer.onInit(this.idleParticles),this.settings.preCalc&&this.preCalc(),this.settings.autoStart&&this.start()}l.prototype.preCalc=function(){for(var t=this.lifespan*this.fps,e=0;e<t;e++)this.update(e+1);this.settings.preCalc=!1,this.update()},l.prototype.start=function(){this.running=!0,TweenLite.ticker.addEventListener("tick",this.update,this)},l.prototype.stop=function(){this.running=!1},l.prototype.destroy=function(){this.stop(),TweenLite.ticker.addEventListener("tick",this.update,this)},l.prototype.prepareImages=function(){for(var t=0;t<this.images.length;t++){var e=new Image;e.src=this.images[t],this.images[t]=e}},l.prototype.update=function(t){if(this.currentTime=t?t*(1/60):(new Date).getTime()/1e3,this.deltaTime=this.currentTime-this.oldTime,t||60==this.fps||this.deltaTime>this.updateInterval){if(this.oldTime=this.currentTime-this.deltaTime%this.updateInterval,this.deltaTime>3*this.updateInterval)return;var e=this.particlesPerFrame+this.particleRest;this.particleRest=e%1,(this.running||t)&&this.emitParticles(Math.floor(e)),this.onUpdateParticles&&this.onUpdateParticles(this.activeParticles);for(var i=this.activeParticles.length;i--;){var s=this.activeParticles[i];(this.settings.wind||this.settings.gravity)&&s.accelerate(this.settings.wind,this.settings.gravity),this.settings.turbulence&&s.accelerate(FORGE.math.random(-this.settings.turbulence,this.settings.turbulence),FORGE.math.random(-this.settings.turbulence,this.settings.turbulence)),this.onUpdateParticle&&this.onUpdateParticle(s),s.update(this.deltaTime),(this.settings.recycleStrays&&(s.x<-this.settings.areaPadding||s.x>this.renderer.width+this.settings.areaPadding||s.y<-this.settings.areaPadding||s.y>this.renderer.height+this.settings.areaPadding)||!this.settings.immortal&&s.age>this.lifespan*this.fps)&&(this.idleParticles.push(this.activeParticles.splice(i,1)[0]),this.renderer.onParticleDeath&&this.renderer.onParticleDeath(s),this.onParticleDeath&&this.onParticleDeath(s))}this.renderer.renderParticles(this.settings.reverseRender?this.activeParticles.slice().reverse():this.activeParticles)}this.activeParticles.length||this.running||this.destroy()},l.prototype.emitParticles=function(t){this.running||this.settings.preCalc||(this.start(),this.running=!1);for(var e=0;e<t;e++){var i=void 0;if(this.idleParticles.length)i=this.idleParticles.shift();else{if(this.settings.immortal)return;i=this.activeParticles.shift()}i.age=0,i.progress=0,i.lifeCurve=0,i.springs=[],i.gravitations=[],i.x=this.emitter.x+FORGE.math.random()*(this.emitter.width||0),i.y=this.emitter.y+FORGE.math.random()*(this.emitter.height||0),i.opacity=this.settings.opacity,i.lifespan=this.lifespan*this.fps,i.friction=this.settings.friction,i.rotationSpeed=this.settings.rotationSpeed,null!=this.settings.heading&&null!=this.settings.speed?(i.setSpeed(this.settings.speed),i.setHeading(this.settings.heading)):(i.vx=this.settings.vx,i.vy=this.settings.vy),i.scale=this.settings.scale,i.rotation=this.settings.rotation,this.images&&(i.img=this.images[FORGE.math.random(0,this.images.length-1,!0)]),this.onEmitParticle&&this.onEmitParticle(i),this.renderer.onEmitParticle&&this.renderer.onEmitParticle(i),this.activeParticles.push(i)}};var p=l;if(window.FORGE=r()({},window.FORGE,{Particles:p}),!window.console);e.default=window.FORGE}});